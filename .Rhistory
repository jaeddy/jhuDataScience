install.packages('plotly')
# Create a directory to store data, if one doesn't already exist
if (!file.exists("data/")) {
dir.create("data/")
}
# Download the data from the web and record the date and time
if (!file.exists("data/FNEI_data.zip")) {
fileAddress <- paste0("https://d396qusza40orc.cloudfront.net/",
"exdata%2Fdata%2FNEI_data.zip")
download.file(fileAddress, "data/FNEI_data.zip",
method = "curl")
dateDownloaded <- date()
file.create("data/dateDownloaded.txt")
con <- file("data/dateDownloaded.txt")
writeChar(dateDownloaded, con)
close(con)
}
# Unzip the data file
if (!file.exists("data/Source_Classification_Code.rds")) {
unzip(zipfile = "data/FNEI_data.zip", exdir = "data/")
}
NEI <- readRDS("data/summarySCC_PM25.rds")
SCC <- readRDS("data/Source_Classification_Code.rds")
library(dplyr)
library(ggplot2)
library(lubridate)
library(plotly)
# Preview the data using readLines() and the lubridate package to identify rows
# corresponding to the target range of dates (1/2/2007 to 2/2/2007)
# Note: the assignment description states that dates are found in the first
# column and formatted as "dd/mm/yyyy", but this can also be confirmed by
# reading and visually inspecting the first several lines
con <- file("data/household_power_consumption.txt")
for (n in seq(10000, 200000, 10000)) {
lines <- readLines(con, n)
lineParts <- strsplit(tail(lines, 1), ";")
lineDate <- dmy(unlist(lineParts)[1])
if (lineDate > dmy("2/2/2007")) {
break
}
}
startLine <- min(grep("1/2/2007", lines))
endLine <- max(grep("2/2/2007", lines))
close(con)
# Load the data only up to the end of the desired range
powerDat <- read.table("data/household_power_consumption.txt",
nrows = endLine, sep = ";", header = TRUE,
na.strings = c("?"))
str(powerDat)
getwd()
setwd("exploratoryDataAnalysis/")
# Preview the data using readLines() and the lubridate package to identify rows
# corresponding to the target range of dates (1/2/2007 to 2/2/2007)
# Note: the assignment description states that dates are found in the first
# column and formatted as "dd/mm/yyyy", but this can also be confirmed by
# reading and visually inspecting the first several lines
con <- file("data/household_power_consumption.txt")
for (n in seq(10000, 200000, 10000)) {
lines <- readLines(con, n)
lineParts <- strsplit(tail(lines, 1), ";")
lineDate <- dmy(unlist(lineParts)[1])
if (lineDate > dmy("2/2/2007")) {
break
}
}
startLine <- min(grep("1/2/2007", lines))
endLine <- max(grep("2/2/2007", lines))
close(con)
# Load the data only up to the end of the desired range
powerDat <- read.table("data/household_power_consumption.txt",
nrows = endLine, sep = ";", header = TRUE,
na.strings = c("?"))
str(powerDat)
# Subset the data to only include the target date range
powerDat <- powerDat[(startLine-1):endLine, ]
# Convert the Date and Time variables into a new Date/Time class variable using
# lubridate and dplyr
powerDat <- mutate(powerDat, datetime = dmy_hms(paste(Date, Time)))
# Make plot 1
par(bg = "transparent")
with(powerDat, hist(Global_active_power, col = "red",
xlab = "Global Active Power (kilowatts)",
main = "Global Active Power"))
plot_ly(powerDat, x = Global_active_power, type = "histogram")
?plot_ly
?layout
plot_ly(powerDat, x = Global_active_power, type = "histogram") %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"))
plot_ly(powerDat, x = Global_active_power, type = "histogram") %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
?plot_ly
plot_ly(powerDat, x = Global_active_power, type = "histogram",
nbinsx(30)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram"[, nbinsx(30)]) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", nbinsx = 30) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", nbinsx = 30, line = "black") %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", nbinsx = 30) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
setwd("exploratoryDataAnalysis/")
library(dplyr)
library(ggplot2)
library(lubridate)
library(plotly)
# Preview the data using readLines() and the lubridate package to identify rows
# corresponding to the target range of dates (1/2/2007 to 2/2/2007)
# Note: the assignment description states that dates are found in the first
# column and formatted as "dd/mm/yyyy", but this can also be confirmed by
# reading and visually inspecting the first several lines
con <- file("data/household_power_consumption.txt")
for (n in seq(10000, 200000, 10000)) {
lines <- readLines(con, n)
lineParts <- strsplit(tail(lines, 1), ";")
lineDate <- dmy(unlist(lineParts)[1])
if (lineDate > dmy("2/2/2007")) {
break
}
}
startLine <- min(grep("1/2/2007", lines))
endLine <- max(grep("2/2/2007", lines))
close(con)
# Load the data only up to the end of the desired range
powerDat <- read.table("data/household_power_consumption.txt",
nrows = endLine, sep = ";", header = TRUE,
na.strings = c("?"))
str(powerDat)
# Subset the data to only include the target date range
powerDat <- powerDat[(startLine-1):endLine, ]
# Convert the Date and Time variables into a new Date/Time class variable using
# lubridate and dplyr
powerDat <- mutate(powerDat, datetime = dmy_hms(paste(Date, Time)))
# Make plot 1
with(powerDat, hist(Global_active_power, col = "red",
xlab = "Global Active Power (kilowatts)",
main = "Global Active Power"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", nbinsx = 30) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
powerDat %>%
ggplot2(aes(x = Global_active_power)) +
geom_histogram()
powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram()
powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(bins = 30)
powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(binwidth = 1)
# Make plot 1
with(powerDat, hist(Global_active_power, col = "red",
xlab = "Global Active Power (kilowatts)",
main = "Global Active Power"))
powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(binwidth = 0.5)
plot_ly(powerDat, x = Global_active_power,
type = "histogram", xbins = list(size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", xbins = list(size = 1)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", xbins = list(size = 2)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", nbinsx = 30) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", xbins = list(start = 0, end = 8.5, size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", autobin = FALSE, xbins = list(start = 0, end = 8.5, size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", autobinx = FALSE, xbins = list(start = 0, end = 8.5, size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", autobinx = FALSE, xbins = list(size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
plot_ly(powerDat, x = Global_active_power,
type = "histogram", autobinx = FALSE,
xbins = list(start = 0, end = 8.5, size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
par(mfrow(c(1, 2)))
par(mfrow = c(1, 2))
plot(1:3, 1:3)
plot(1:3, 1:3)
plot(1:5, 1:5)
plot(1:5, 1:5)
p <- powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(binwidth = 0.5)
p
p <- powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(binwidth = 0.5) +
xlab("Global Active Power (kilowatts)") +
ylab("Frequency") +
title("Global Active Power")
p
p <- powerDat %>%
ggplot(aes(x = Global_active_power)) +
geom_histogram(binwidth = 0.5) +
xlab("Global Active Power (kilowatts)") +
ylab("Frequency") +
ggtitle("Global Active Power")
p
ggplotly(p)
# Make plot 2
with(powerDat, {
plot(datetime, Global_active_power,
type = "n",
ylab = "Global Active Power (kilowatts)",
xlab = "")
lines(datetime, Global_active_power)
})
dev.of()
dev.off()
# Make plot 2
with(powerDat, {
plot(datetime, Global_active_power,
type = "n",
ylab = "Global Active Power (kilowatts)",
xlab = "")
lines(datetime, Global_active_power)
})
powerDat %>%
plot_ly(x = Global_active_power,
type = "histogram", autobinx = FALSE,
xbins = list(start = 0, end = 8.5, size = 0.5)) %>%
layout(title = "Global Active Power",
xaxis = list(title = "Global Active Power (kilowatts)"),
yaxis = list(title = "Frequency"))
# Make plot 2
with(powerDat, {
plot(datetime, Global_active_power,
type = "n",
ylab = "Global Active Power (kilowatts)",
xlab = "")
lines(datetime, Global_active_power)
})
powerDat %>%
plotly(x = datetime, y = Global_active_power)
powerDat %>%
plot_ly(x = datetime, y = Global_active_power)
powerDat %>%
ggplot(aes(x = datetime, y = Global_active_power)) +
geom_line()
p <- powerDat %>%
ggplot(aes(x = datetime, y = Global_active_power)) +
geom_line()
p
ggplotly(p)
